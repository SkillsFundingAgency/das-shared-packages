@using SFA.DAS.Provider.Shared.UI.Extensions

@{
    var sectionId = ViewData.GetZenDeskSectionId();
    var snippetKey = ViewData.GetZenDeskSnippetKey();
    var cobrowsingSnippetKey = ViewData.GetCobrowsingSnippetKey();
    var snippetUrl = $"https://static.zdassets.com/ekr/snippet.js?key={snippetKey}";
    var cobrowsingSnippetUrl = $"https://embed-euw1.rcrsv.io/{cobrowsingSnippetKey}?zwwi=1";
    var label = ViewBag.Title;
    var enableCsp = ViewData.EnableCsp();

    if (!string.IsNullOrEmpty(ViewBag.ZenDeskLabel))
    {
        label = ViewBag.ZenDeskLabel;
    }
}
<script type="text/javascript" nws-csp-add-nonce="@enableCsp.ToString().ToLower()">
        window.zESettings = {
            webWidget: {
                contactForm: {
                    attachments: false
                },
                chat: {
                    menuOptions: {
                        emailTranscript: false
                    }
                },
                helpCenter: {
                    filter: {
                        section: @sectionId
                    }
                }
            }
        };
</script>
<script id="ze-snippet" src="@snippetUrl"></script>
<script id="co-snippet" src="@cobrowsingSnippetUrl"></script>
<script type="text/javascript" nws-csp-add-nonce="@enableCsp.ToString().ToLower()">
@Html.SetZenDeskLabels(new string[] { label })
</script>
